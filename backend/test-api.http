### STEP 1: Register Farmer
POST http://localhost:5001/api/auth/register
Content-Type: application/json

{
  "name": "John Farmer",
  "mobile": "9876543210",
  "password": "password123",
  "role": "farmer"
}

### STEP 2: Register Distributor
POST http://localhost:5001/api/auth/register
Content-Type: application/json

{
  "name": "Jane Distributor",
  "mobile": "9876543211",
  "password": "password123",
  "role": "distributor"
}

### STEP 3: Login Farmer
# ACTION: Run this request
# RESULT: Copy the "token" value from response
# EXAMPLE: "token": "eyJhbGc..."
# PASTE IT: Replace {{FARMER_TOKEN}} in steps below
POST http://localhost:5000/api/auth/login
Content-Type: application/json

{
  "mobile": "9876543210",
  "password": "password123"
}

### STEP 4: Login Distributor
# ACTION: Run this request
# RESULT: Copy the "token" value from response
# EXAMPLE: "token": "eyJhbGc..."
# PASTE IT: Replace {{DISTRIBUTOR_TOKEN}} in steps below
POST http://localhost:5001/api/auth/login
Content-Type: application/json

{
  "mobile": "9876543211",
  "password": "password123"
}

### STEP 5: Create Batch & Listing
# ACTION: Replace {{FARMER_TOKEN}} below with token from STEP 3, then run
# RESULT: Copy the "_id" value from response
# EXAMPLE: "_id": "698476b276f97de3f2e97b68"
# PASTE IT: Replace {{LISTING_ID}} in STEP 7
POST http://localhost:5001/api/listings/create
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5ODRhZjdiZjg0NmIxNjQ3NWExOGFkOSIsImlhdCI6MTc3MDMwMzM1NSwiZXhwIjoxNzcyODk1MzU1fQ.OZQh1f9efdHssWNZesS6bEferkCHbHiklKWNEeTt8_8
Content-Type: application/json

{
  "cropName": "Tomato",
  "quantity": 100,
  "pricePerKg": 50,
  "harvestDate": "2026-02-01",
  "originLocation": "Farm Location, State"
}

### STEP 6: Get All Listings
# ACTION: Replace {{FARMER_TOKEN}} with token from STEP 3, then run
# RESULT: View all available listings
GET http://localhost:5001/api/listings
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5ODRhZjdiZjg0NmIxNjQ3NWExOGFkOSIsImlhdCI6MTc3MDMwMzM1NSwiZXhwIjoxNzcyODk1MzU1fQ.OZQh1f9efdHssWNZesS6bEferkCHbHiklKWNEeTt8_8

### STEP 7: Create Order
# ACTION: Replace {{DISTRIBUTOR_TOKEN}} with token from STEP 4
# ACTION: Replace {{LISTING_ID}} with _id from STEP 5, then run
# RESULT: Copy the "_id" value from response (this is the ORDER_ID)
# EXAMPLE: "_id": "698476fc76f97de3f2e97b78"
# PASTE IT: Replace {{ORDER_ID}} in STEP 9
POST http://localhost:5001/api/orders/create
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5ODRhZjdiZjg0NmIxNjQ3NWExOGFkOSIsImlhdCI6MTc3MDMwMzQ2NCwiZXhwIjoxNzcyODk1NDY0fQ.LBtlbQNND_jgMDRFekYGEK49kkNgTEqHVak9dWt-FhA
Content-Type: application/json

{
  "listingId": "698485445e7c29eaa1433bab",
  "quantity": 10
}

### STEP 8: Get All Orders
# ACTION: Replace {{DISTRIBUTOR_TOKEN}} with token from STEP 4, then run
# RESULT: View all orders
GET http://localhost:5001/api/orders
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5ODRhZjdiZjg0NmIxNjQ3NWExOGFkOSIsImlhdCI6MTc3MDMwMzQ2NCwiZXhwIjoxNzcyODk1NDY0fQ.LBtlbQNND_jgMDRFekYGEK49kkNgTEqHVak9dWt-FhA

### STEP 9: Create/Get Chat
# ACTION: Replace {{DISTRIBUTOR_TOKEN}} with token from STEP 4
# ACTION: Replace {{ORDER_ID}} with _id from STEP 7, then run
# RESULT: Copy the "_id" value from response (this is the CHAT_ID)
# EXAMPLE: "_id": "6984771876f97de3f2e97b92"
# PASTE IT: Replace {{CHAT_ID}} in STEP 10 and 12
POST http://localhost:5001/api/chats/order/6984b5c8f846b16475a18b29
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5ODRhZjdiZjg0NmIxNjQ3NWExOGFkOSIsImlhdCI6MTc3MDMwMzQ2NCwiZXhwIjoxNzcyODk1NDY0fQ.LBtlbQNND_jgMDRFekYGEK49kkNgTEqHVak9dWt-FhA

### STEP 10: Send Message
# ACTION: Replace {{ANY_TOKEN}} with either FARMER or DISTRIBUTOR token
# ACTION: Replace {{CHAT_ID}} with _id from STEP 9, then run
# RESULT: Message is sent and stored in MongoDB
# CHECK: Go to MongoDB Atlas â†’ chats collection to see the message
POST http://localhost:5000/api/chats/CHAT_ID/message
Authorization: Bearer ANY_TOKEN
Content-Type: application/json

{
  "content": "Hello! Is this produce still available?"
}

### STEP 11: Get All Chats
# ACTION: Replace {{ANY_TOKEN}} with either FARMER or DISTRIBUTOR token, then run
# RESULT: View all chats for logged-in user
GET http://localhost:5000/api/chats
Authorization: Bearer ANY_TOKEN

### STEP 12: Get Specific Chat
# ACTION: Replace {{ANY_TOKEN}} with either FARMER or DISTRIBUTOR token
# ACTION: Replace {{CHAT_ID}} with _id from STEP 9, then run
# RESULT: View specific chat with all messages
GET http://localhost:5000/api/chats/CHAT_ID
Authorization: Bearer ANY_TOKEN

### Get Unread Count
# ACTION: Replace {{ANY_TOKEN}} with either FARMER or DISTRIBUTOR token, then run
# RESULT: Get count of unread messages
GET http://localhost:5000/api/chats/unread/count
Authorization: Bearer ANY_TOKEN
